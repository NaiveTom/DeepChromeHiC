

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>DeepChromeHiC.py &mdash; DeepChromeHiC 2.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Structure" href="datastructure.html" />
    <link rel="prev" title="Run on a Supercomputer" href="supercomputer.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> DeepChromeHiC
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Catalog:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">DeepChromeHiC Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="supercomputer.html">Run on a Supercomputer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">DeepChromeHiC.py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#help-page">Help Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-example">Command Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-introduction">Module Introduction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="datastructure.html">Data Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_preprocessing.py.html">data_preprocessing.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="train.py.html">train.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.py.html">test.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.py.html">model.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Log and Processing Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="reStructuredText.html">reStructuredText Writing Help</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DeepChromeHiC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>DeepChromeHiC.py</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/DeepChromeHiC.py.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deepchromehic-py">
<h1>DeepChromeHiC.py<a class="headerlink" href="#deepchromehic-py" title="Permalink to this headline">¶</a></h1>
<p>DeepChromeHiC.py is the root file of this project, responsible for calling all subroutines.</p>
<p>DeepChromeHiC is an arguments parser.</p>
<div class="section" id="help-page">
<h2>Help Page<a class="headerlink" href="#help-page" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>D:<span class="se">\D</span>eepChromeHiC&gt;python DeepChromeHiC.py -h

************************************
************************************

    Welcome to use DeepChromeHiC

************************************
************************************

begin <span class="nb">time</span> &gt;&gt;&gt; Fri Jun <span class="m">18</span> <span class="m">10</span>:31:09 <span class="m">2021</span>



If it is the first <span class="nb">time</span> to use, please preprocess the data first.
Use the command: python3 DeepChromeHiC.py -p <span class="nb">true</span> -n <span class="o">[</span>gene name<span class="o">]</span>
For example: python3 DeepChromeHiC.py -p <span class="nb">true</span> -n AD2.po

usage: DeepChromeHiC.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-p PREPROCESSING<span class="o">]</span> <span class="o">[</span>-m MODEL<span class="o">]</span> <span class="o">[</span>-t TYPE<span class="o">]</span> <span class="o">[</span>-n NAME<span class="o">]</span>

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -p PREPROCESSING, --preprocessing PREPROCESSING
                                                Preprocess the data, <span class="k">if</span> you enter <span class="o">[</span>true<span class="o">]</span> <span class="o">(</span><span class="k">case</span> sensitive<span class="o">)</span>, <span class="k">then</span> proceed, <span class="k">if</span> no, pass this
                                                process. Note: This <span class="nb">command</span> only needs to be entered once.
  -m MODEL, --model MODEL
                                                Enter the model name which your choose: <span class="o">[</span>onehot_cnn_one_branch<span class="o">]</span> / <span class="o">[</span>onehot_cnn_two_branch<span class="o">]</span> /
                                                <span class="o">[</span>onehot_embedding_dense<span class="o">]</span> / <span class="o">[</span>onehot_embedding_cnn_one_branch<span class="o">]</span> /
                                                <span class="o">[</span>onehot_embedding_cnn_two_branch<span class="o">]</span> / <span class="o">[</span>onehot_dense<span class="o">]</span> / <span class="o">[</span>onehot_resnet18<span class="o">]</span> / <span class="o">[</span>onehot_resnet34<span class="o">]</span> /
                                                <span class="o">[</span>embedding_cnn_one_branch<span class="o">]</span> / <span class="o">[</span>embedding_cnn_two_branch<span class="o">]</span> / <span class="o">[</span>embedding_dense<span class="o">]</span> <span class="o">(</span>all use
                                                lowercase<span class="o">)</span>.
  -t TYPE, --type TYPE  Please choose <span class="o">[</span>train<span class="o">]</span> / <span class="o">[</span>test<span class="o">]</span> <span class="o">(</span>all use lowercase<span class="o">)</span>.
  -n NAME, --name NAME  Enter the gene name of your choice <span class="o">(</span>note: <span class="k">case</span> sensitive<span class="o">)</span>.
</pre></div>
</div>
<p>You can open the help interface by running <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">DeepChromeHiC.py</span> <span class="pre">-h</span></code>, which introduces the role of each parameter.</p>
</div>
<div class="section" id="command-example">
<h2>Command Example<a class="headerlink" href="#command-example" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">DeepChromeHiC.py</span> <span class="pre">-h</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-h</span></code></p></li>
</ul>
<p>This parameter is used to request <code class="docutils literal notranslate"><span class="pre">Help</span> <span class="pre">Page</span></code></p>
</div></blockquote>
</li>
</ul>
<p>Entering this parameter will output the <code class="docutils literal notranslate"><span class="pre">Help</span> <span class="pre">Page</span></code> (See the previous unit for details).</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">DeepChromeHiC.py</span> <span class="pre">-p</span> <span class="pre">true</span> <span class="pre">-n</span> <span class="pre">AD2.po</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">true</span></code></p></li>
</ul>
<p>This parameter is used to prepare data, if it is <code class="docutils literal notranslate"><span class="pre">true</span></code> , png files and npz files are generated.
This is not a required parameter, so if you are training, you do not need to write this parameter.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">AD2.po</span></code></p></li>
</ul>
<p>This parameter is used to inform the system of the gene name to be operated.
The name of the gene to be operated here is <code class="docutils literal notranslate"><span class="pre">AD2.po</span></code></p>
</div></blockquote>
</li>
</ul>
<p>Using this command will prepare all the <code class="docutils literal notranslate"><span class="pre">AD2.po</span></code> gene and processing data, including <code class="docutils literal notranslate"><span class="pre">npz</span></code> and <code class="docutils literal notranslate"><span class="pre">png</span></code> . This command only needs to be entered once.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command only needs to be used once to generate all the data of the gene fragment. If it is entered again, the previous data will be overwritten.</p>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">DeepChromeHiC.py</span> <span class="pre">-m</span> <span class="pre">onehot_cnn_one_branch</span> <span class="pre">-t</span> <span class="pre">train</span> <span class="pre">-n</span> <span class="pre">AD2.po</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">onehot_cnn_one_branch</span></code></p></li>
</ul>
<p>This parameter is used to confirm the input model. A total of 11 different models can be selected, namely: <code class="docutils literal notranslate"><span class="pre">onehot_cnn_one_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_cnn_two_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_embedding_dense</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_embedding_cnn_one_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_embedding_cnn_two_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_dense</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_resnet18</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_resnet34</span></code> / <code class="docutils literal notranslate"><span class="pre">embedding_cnn_one_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">embedding_cnn_two_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">embedding_dense</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">train</span></code></p></li>
</ul>
<p>This parameter is used to select the type of use, whether it is <code class="docutils literal notranslate"><span class="pre">train</span></code> or <code class="docutils literal notranslate"><span class="pre">test</span></code> .</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">AD2.po</span></code></p></li>
</ul>
<p>This parameter is used to select the input gene name (the same name as the folder where the gene data is stored)</p>
</div></blockquote>
</li>
</ul>
<p>This command is used to train the onehot_cnn_one_branch model of the <code class="docutils literal notranslate"><span class="pre">AD2.po</span></code> gene, and the training results will be stored in <code class="docutils literal notranslate"><span class="pre">h5_weight/AD2.po</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">DeepChromeHiC.py</span> <span class="pre">-m</span> <span class="pre">onehot_cnn_one_branch</span> <span class="pre">-t</span> <span class="pre">test</span> <span class="pre">-n</span> <span class="pre">AD2.po</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">onehot_cnn_one_branch</span></code></p></li>
</ul>
<p>This parameter is used to confirm the input model. A total of 11 different models can be selected, namely: <code class="docutils literal notranslate"><span class="pre">onehot_cnn_one_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_cnn_two_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_embedding_dense</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_embedding_cnn_one_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_embedding_cnn_two_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_dense</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_resnet18</span></code> / <code class="docutils literal notranslate"><span class="pre">onehot_resnet34</span></code> / <code class="docutils literal notranslate"><span class="pre">embedding_cnn_one_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">embedding_cnn_two_branch</span></code> / <code class="docutils literal notranslate"><span class="pre">embedding_dense</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">test</span></code></p></li>
</ul>
<p>This parameter is used to select the type of use, whether it is <code class="docutils literal notranslate"><span class="pre">train</span></code> or <code class="docutils literal notranslate"><span class="pre">test</span></code> .</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">AD2.po</span></code></p></li>
</ul>
<p>This parameter is used to select the input gene name (the same name as the folder where the gene data is stored)</p>
</div></blockquote>
</li>
</ul>
<p>This command is used to test the onehot_cnn_one_branch model of the <code class="docutils literal notranslate"><span class="pre">AD2.po</span></code> gene. It needs to store the weight data in <code class="docutils literal notranslate"><span class="pre">h5_weight/AD2.po</span></code> . As a result, <code class="docutils literal notranslate"><span class="pre">auc</span> <span class="pre">roc</span></code> is generated in <code class="docutils literal notranslate"><span class="pre">log.txt</span></code> , and the chart data is stored in the <code class="docutils literal notranslate"><span class="pre">result</span></code> folder.</p>
</div>
<div class="section" id="module-introduction">
<h2>Module Introduction<a class="headerlink" href="#module-introduction" title="Permalink to this headline">¶</a></h2>
<p>This release includes multiple models,
The following are all the model names that can be entered.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">onehot_cnn_one_branch</span></code></p>
<blockquote>
<div><p>Use one-hot encoding to process the ACGT base fragments of the promoter and enhancer, then merge the promoter and enhancer together, and then use CNN to process, and finally get the output</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">onehot_cnn_two_branch</span></code></p>
<blockquote>
<div><p>Use one-hot encoding to process the ACGT base fragments of the promoter and enhancer, and then send the promoter and enhancer to different CNN networks, and then merge the CNN networks to finally get the output</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">onehot_embedding_dense</span></code></p>
<blockquote>
<div><p>Use one-hot encoding to process the ACGT base fragments of the promoter and enhancer, then merge the promoter and enhancer, then use the embedding layer to embed the gene fragment, and then send it to multiple dense layers and output</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">onehot_embedding_cnn_one_branch</span></code></p>
<blockquote>
<div><p>Use one-hot encoding to process the ACGT base fragments of the promoter and enhancer, then merge the promoter and enhancer together, then use the embedding layer for embedding and then use CNN to process, and finally get the output</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">onehot_embedding_cnn_two_branch</span></code></p>
<blockquote>
<div><p>Use one-hot encoding to process the ACGT base fragments of the promoter and enhancer, and then send the promoter and enhancer to different embedding layers for embedding and then send to different CNN networks, and then merge the CNN networks to finally get the output</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">onehot_dense</span></code></p>
<blockquote>
<div><p>Use one-hot encoding to process the ACGT base fragments of the promoter and enhancer, then merge the promoter and enhancer, and then send it to multiple dense layers and output</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">onehot_resnet18</span></code></p>
<blockquote>
<div><p>Use one-hot encoding to process the ACGT base fragments of the promoter and enhancer, then merge the promoter and enhancer, and then send it to The simplified (due to GPU memory usage) and improved resnet18, finally get the output.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">onehot_resnet34</span></code></p>
<blockquote>
<div><p>Use one-hot encoding to process the ACGT base fragments of the promoter and enhancer, then merge the promoter and enhancer, and then send it to The simplified (due to GPU memory usage) and improved resnet34, finally get the output.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">embedding_cnn_one_branch</span></code></p>
<blockquote>
<div><p>Use dna2vec embedding (you can customize the training embedding matrix) to process the ACGT base fragments of the promoter and enhancer, then merge the promoter and enhancer together, and then use CNN to process, and finally get the output</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">embedding_cnn_two_branch</span></code></p>
<blockquote>
<div><p>Use dna2vec embedding (you can customize the training embedding matrix) to process the ACGT base fragments of the promoter and enhancer, and then send the promoter and enhancer to different CNN networks, and then merge the CNN networks to finally get the output</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">embedding_dense</span></code></p>
<blockquote>
<div><p>Use dna2vec embedding (you can customize the training embedding matrix) to process the ACGT base fragments of the promoter and enhancer, then merge the promoter and enhancer together, and then use multiple dense layers to process, and finally get the output</p>
</div></blockquote>
</li>
</ul>
<img alt="_images/div.png" src="_images/div.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="datastructure.html" class="btn btn-neutral float-right" title="Data Structure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="supercomputer.html" class="btn btn-neutral float-left" title="Run on a Supercomputer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, bizi.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>